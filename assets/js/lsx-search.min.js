var lsx_search=Object.create(null);!function(s,e,t,r){"use strict";lsx_search.document=s(t),lsx_search.window=s(e),lsx_search.window_height=e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,lsx_search.window_width=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,lsx_search.facet_wp_load_first_time=!1,lsx_search.currentForm=!1,lsx_search.init=function(){lsx_search.currentForm=jQuery(".lsx-search-form"),r!=lsx_search.currentForm&&(lsx_search.watchSubmit(),r!=lsx_search.currentForm.find(".search-field")&&lsx_search.watchSearchInput(),r!=lsx_search.currentForm.find(".btn-dropdown")&&lsx_search.watchDropdown(),r!=lsx_search.currentForm.find(".datepicker")&&lsx_search.watchDatePickerButton())},lsx_search.on_facet_wp_load=function(){lsx_search.facet_wp_load_first_time=!1,lsx_search.document.on("facetwp-loaded",function(){if(s("body").removeClass("facetwp-loading-body"),s("#secondary, #primary").css({opacity:"","pointer-events":""}),""==FWP.build_query_string()?s(".lsx-search-title-results .clear-facets").addClass("hidden"):s(".lsx-search-title-results .clear-facets").removeClass("hidden"),s.each(FWP.settings,function(e,t){if("product_price"===e){var a=s(".facetwp-facet-"+e).closest(".facetwp-item");t.range.min===t.range.max?a.addClass("hidden"):a.removeClass("hidden")}}),s.each(FWP.settings.num_choices,function(e,t){var a=s(".parent-facetwp-facet-"+e).closest(".facetwp-item");0===t?a.hide():a.show()}),!1===lsx_search.facet_wp_load_first_time)return lsx_search.first_facet_collaped(),lsx_search.onChangeTab_Map(),lsx_search.initLayoutSwitcher(),""===jQuery(".lsx-map-preview").html()&&lsx_search.reloadMap(),void(lsx_search.facet_wp_load_first_time=!0);var e=0<s(".facetwp-facet").length?s(".facetwp-facet").offset().top:s(".facetwp-template").offset().top;e-=250,s("html, body").animate({scrollTop:e},400)}),lsx_search.document.on("facetwp-refresh",function(){s("body").addClass("facetwp-loading-body"),s("#secondary, #primary").css({opacity:.5,"pointer-events":"none"})})},lsx_search.onChangeTab_Map=function(){s('a[data-toggle="tab"][href="#to-search-map"]').on("shown.bs.tab",lsx_search.reloadMap())},lsx_search.reloadMap=function(){},lsx_search.mobile_filters=function(){0<s(".facetwp-template").length&&(s(".facetwp-filters-wrap").slideAndSwipe(),r!==FWP&&(FWP.auto_refresh=!1),s(".ssm-close-btn").on("click",function(){FWP.is_refresh=!0,lsx_search.document.trigger("facetwp-refresh"),FWP.fetch_data(),FWP.is_refresh=!1}),s(".ssm-apply-btn").on("click",function(){FWP.refresh()}),lsx_search.document.on("facetwp-refresh",function(){s(".facetwp-filters-wrap").each(function(){s(this).data("plugin_slideAndSwipe").hideNavigation()})}))},lsx_search.input_search=function(){lsx_search.document.on("click",".search-submit-facetwp",function(){FWP.refresh()})},lsx_search.watchDropdown=function(){var t=this;jQuery(lsx_search.currentForm).find(".dropdown-toggle").each(function(){jQuery(this).attr("data-toggle","dropdown")}),jQuery(lsx_search.currentForm).find(".dropdown-menu").on("click","a",function(e){e.preventDefault(),jQuery(this).parents(".dropdown").find(".btn-dropdown").attr("data-selection",jQuery(this).attr("data-value")),jQuery(this).parents(".dropdown").find(".btn-dropdown").html(jQuery(this).html()+' <span class="caret"></span>'),jQuery(this).hasClass("default")?jQuery(this).parent("li").hide():jQuery(this).parents("ul").find(".default").parent("li").show(),jQuery(this).parents(".field").hasClass("combination-dropdown")&&t.switchDropDown(jQuery(this).parents(".dropdown")),jQuery(this).parents(".field").hasClass("engine-select")&&t.switchEngine(jQuery(this).parents(".dropdown"))})},lsx_search.watchSubmit=function(){var a=lsx_search.currentForm;jQuery(lsx_search.currentForm).on("submit",function(e){r!=jQuery(this).find(".btn-dropdown:not(.btn-combination)")&&jQuery(this).find(".btn-dropdown:not(.btn-combination)").each(function(){var e=jQuery(this).attr("data-selection");if(0!=e||"0"!=e){var t=jQuery("<input>").attr("type","hidden").attr("name",jQuery(this).attr("id")).val(e);jQuery(a).append(jQuery(t))}}),jQuery(this).find('input[type="text"]').each(function(){"s"!=jQuery(this).attr("name")&&""==jQuery(this).val()&&jQuery(this).attr("name","")})})},lsx_search.watchSearchInput=function(){jQuery(lsx_search.currentForm).find(".search-field").on("keyup",function(e){jQuery(this).hasClass("error")&&jQuery(this).removeClass("error")})},lsx_search.watchDatePickerButton=function(){jQuery(lsx_search.currentForm).find(".datepicker .datepicker-value").each(function(e){jQuery(this).datepicker({dateFormat:"yy-mm-dd"})})},lsx_search.switchDropDown=function(e){var t=e.find("button").attr("data-selection");if(0<e.parents("form").find(".combination-toggle.selected").length){e.parents("form").find(".combination-toggle.selected button").attr("data-selection","0");var a=e.parents("form").find(".combination-toggle.selected a.default").html();e.parents("form").find(".combination-toggle.selected button").html(a+' <span class="caret"></span>'),e.parents("form").find(".combination-toggle.selected").removeClass("selected").addClass("hidden")}e.parents("form").find("#"+t).parents(".combination-toggle").removeClass("hidden").addClass("selected")},lsx_search.switchEngine=function(e){e.find("button").attr("data-selection");if(0<e.parents("form").find(".combination-toggle.selected").length){e.parents("form").find(".combination-toggle.selected button").attr("data-selection","0");var t=e.parents("form").find(".combination-toggle.selected a.default").html();e.parents("form").find(".combination-toggle.selected button").html(t+' <span class="caret"></span>'),e.parents("form").find(".combination-toggle.selected").removeClass("selected").addClass("hidden")}e.parents("form").attr("engine")},lsx_search.clearFacets=function(){FWP.reset()},lsx_search.first_facet_collaped=function(){var e=s(".lsx-search-filer-area .facetwp-item-wrap .row:not(.hidden-sm) .facetwp-item:visible:first");s(e).find("button.facetwp-collapse").trigger("click")},lsx_search.initLayoutSwitcher=function(){jQuery(t).on("click",".lsx-layout-switcher-option",function(e){e.preventDefault(),console.log(jQuery("body").hasClass("lsx-search-enabled")),jQuery("body").hasClass("lsx-search-enabled")&&FWP.refresh()})},lsx_search.document.ready(function(){lsx_search.on_facet_wp_load(),lsx_search.input_search(),lsx_search.window_width<768&&lsx_search.mobile_filters(),lsx_search.init()})}(jQuery,window,document);